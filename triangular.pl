#! /usr/bin/perl 

# This programs finds the value of the first triangle number to have over five hundred divisors.

use strict;
use warnings;

sub divisor {
	my $num = shift;
	my $half = $num/2;
	my @divList = ();
	push @divList, $half;
	for (my $i = 1; $i <= $half ; $i++) {
		if ($num%$i == 0) {
			push @divList, $i;
			if ($#divList >= 499){
				print "$num is the first number to have more than 500 divisors.\n";
				print "Factors are @divList";
				die "Goal reached";
			}	
		}
	}
	my $factors = ($#divList + 1);
	print "Number of factors of $num are $factors\n";
	return $factors;
}

sub triangular {
	my $first = 1;
	my $second = 2;
	my $sum;
	my $result;
	do {
		$sum += $second;
		#print "sum is $sum\n";
		$result = &divisor($sum);
		$second++;
	}
	while ($result <= 499)

}
&triangular();

#Getting answer: 31351320. All the factors are below: 

#Factors are 15675660 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 18 20 21 22 24 26 27 28 29 30 33 35 36 39 40 42 44 45 52 54 55 56 58 60 63 65 66 70 72 77 78 84 87 88 90 91 99 104 105 108 110 116 117 120 126 130 132 135 140 143 145 154 156 165 168 174 180 182 189 195 198 203 210 216 220 231 232 234 252 260 261 264 270 273 280 286 290 297 308 312 315 319 330 348 351 360 364 377 378 385 390 396 406 420 429 435 440 455 462 468 495 504 520 522 540 546 572 580 585 594 609 616 630 638 660 693 696 702 715 728 754 756 770 780 783 792 812 819 840 858 870 910 924 936 945 957 990 1001 1015 1044 1080 1092 1131 1144 1155 1160 1170 1188 1218 1260 1276 1287 1305 1320 1365 1386 1404 1430 1485 1508 1512 1540 1560 1566 1595 1624 1638 1716 1740 1755 1820 1827 1848 1885 1890 1914 1980 2002 2030 2079 2088 2145 2184 2233 2262 2310 2340 2376 2436 2457 2520 2552 2574 2610 2639 2730 2772 2808 2860 2871 2970 3003 3016 3045 3080 3132 3190 3276 3393 3432 3465 3480 3510 3640 3654 3770 3780 3828 3861 3915 3960 4004 4060 4095 4147 4158 4290 4466 4524 4620 4680 4785 4872 4914 5005 5148 5220 5278 5460 5481 5544 5655 5720 5742 5940 6006 6090 6264 6380 6435 6552 6699 6786 6930 7020 7308 7540 7560 7656 7722 7830 7917 8008 8120 8190 8294 8316 8580 8613 8932 9009 9048 9135 9240 9570 9828 10010 10179 10296 10395 10440 10556 10920 10962 11165 11310 11484 11880 12012 12180 12285 12441 12760 12870 13195 13398 13572 13860 14040 14355 14616 15015 15080 15444 15660 15834 16380 16588 16632 16965 17160 17226 17864 18018 18270 19140 19305 19656 20020 20097 20358 20735 20790 21112 21924 22330 22620 22968 23751 24024 24360 24570 24882 25740 26390 26796 27027 27144 27405 27720 28710 29029 30030 30888 31320 31668 32760 33176 33495 33930 34452 36036 36540 37323 38280 38610 39585 40040 40194 40716 41470 41580 43065 43848 44660 45045 45240 47502 49140 49764 50895 51480 52780 53592 54054 54810 57420 58058 60060 60291 62205 63336 66990 67860 68904 71253 72072 73080 74646 77220 79170 80388 81432 82940 83160 86130 87087 89320 90090 95004 98280 99528 100485 101790 105560 108108 109620 111969 114840 116116 118755 120120 120582 124410 133980 135135 135720 142506 145145 149292 154440 158340 160776 165880 172260 174174 180180 186615 190008 200970 203580 216216 219240 223938 232232 237510 241164 248820 261261 267960 270270 285012 290290 298584 301455 316680 344520 348348 356265 360360 373230 401940 407160 435435 447876 475020 482328 497640 522522 540540 559845 570024 580580 602910 696696 712530 746460 783783 803880 870870 895752 950040 1045044 1081080 1119690 1161160 1205820 1306305 1425060 1492920 1567566 1741740 2090088 2239380
